
<div class="person-card-container">
  <div
    [class]="getCardClass()"
    (click)="onSelect()"
  >
    <!-- Avatar ou Photo -->
    <div class="person-avatar" [style.background]="getGradient()">
      <div *ngIf="!person.photo" class="avatar-initials">
        {{ getInitials() }}
      </div>
      <img *ngIf="person.photo"
           [src]="person.photo"
           [alt]="person.prenom + ' ' + person.nom"
           class="person-photo"
           (error)="onPhotoError($event)">
    </div>

    <!-- Badge genre -->
    <div class="gender-badge" [class.male]="person.genre === 'homme'" [class.female]="person.genre === 'femme'">
      {{ person.genre === 'homme' ? 'ğŸ‘¨' : 'ğŸ‘©' }}
    </div>

    <!-- Info -->
    <div class="person-info">
      <div class="person-name">
        <div class="person-firstname">{{ person.prenom }}</div>
        <div class="person-lastname">{{ person.nom }}</div>
      </div>

      <div *ngIf="person.profession" class="person-profession">
        ğŸ’¼ {{ person.profession }}
      </div>

      <div *ngIf="person.dateNaissance" class="person-age">
        ğŸ‚ {{ getAge() }} ans
      </div>

      <div *ngIf="person.email" class="person-email" title="Email">
        ğŸ“§ {{ person.email | truncate:20 }}
      </div>
    </div>

    <!-- Badge enfants -->
    <div *ngIf="person.children && person.children.length > 0"
         class="children-badge"
         title="{{ person.children.length }} enfant(s)">
      ğŸ‘¶ {{ person.children.length }}
    </div>

    <!-- Indicateur photo -->
    <div *ngIf="person.photo" class="photo-indicator" title="Photo disponible">
      ğŸ“·
    </div>
  </div>

  <!-- Boutons d'action -->
  <div class="action-buttons">
    <button
      (click)="onAddChild($event)"
      class="btn-action btn-add"
      title="Ajouter un enfant"
    >
      ğŸ‘¶
    </button>
    <button
      (click)="onViewDetails($event)"
      class="btn-action btn-view"
      title="Voir dÃ©tails"
    >
      ğŸ‘ï¸
    </button>
    <button
      (click)="onEdit($event)"
      class="btn-action btn-edit"
      title="Modifier"
    >
      âœï¸
    </button>
    <button
      (click)="onDelete($event)"
      class="btn-action btn-delete"
      title="Supprimer"
    >
      ğŸ—‘ï¸
    </button>
  </div>

  <!-- Infobulle rapide -->
  <div class="quick-info" *ngIf="person.notes && person.notes.length > 0">
    <div class="info-icon">ğŸ“</div>
    <div class="info-text">{{ person.notes | truncate:50 }}</div>
  </div>
</div>
