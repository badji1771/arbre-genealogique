
<div class="person-card-container">
  <div
    [class]="getCardClass()"
    (click)="onSelect()"
  >
    <!-- Avatar ou Photo -->
    <div class="person-avatar" [style.background]="getGradient()">
      <div *ngIf="!person.photo" class="avatar-initials">
        {{ getInitials() }}
      </div>
      <img *ngIf="person.photo"
           [src]="person.photo"
           [alt]="person.prenom + ' ' + person.nom"
           class="person-photo"
           (error)="onPhotoError($event)">
    </div>

    <!-- Badge genre -->
    <div class="gender-badge" [class.male]="person.genre === 'homme'" [class.female]="person.genre === 'femme'">
      <i class="fas" [class.fa-mars]="person.genre === 'homme'" [class.fa-venus]="person.genre === 'femme'"></i>
    </div>

    <!-- Info -->
    <div class="person-info">
      <div class="person-name">
        <div class="person-firstname">{{ person.prenom }}</div>
        <div class="person-lastname">{{ person.nom }}</div>
      </div>

      <div *ngIf="person.profession" class="person-profession">
        <i class="fas fa-briefcase"></i> {{ person.profession }}
      </div>

      <div *ngIf="person.dateNaissance" class="person-age">
        <i class="fas fa-cake-candles"></i> {{ getAge() }} ans
      </div>

      <div *ngIf="person.email" class="person-email" title="Email">
        <i class="fas fa-envelope"></i> {{ person.email | truncate:20 }}
      </div>
    </div>

    <!-- Badge enfants -->
    <div *ngIf="person.children && person.children.length > 0"
         class="children-badge"
         title="{{ person.children.length }} enfant(s)">
      <i class="fas fa-baby"></i> {{ person.children.length }}
    </div>

    <!-- Indicateur photo -->
    <div *ngIf="person.photo" class="photo-indicator" title="Photo disponible">
      <i class="fas fa-camera"></i>
    </div>
  </div>

  <!-- Boutons d'action -->
  <div class="action-buttons">
    <button
      (click)="onAddChild($event)"
      class="btn-action btn-add"
      title="Ajouter un enfant"
    >
      <i class="fas fa-baby"></i>
    </button>
    <button
      (click)="onViewDetails($event)"
      class="btn-action btn-view"
      title="Voir dÃ©tails"
    >
      <i class="fas fa-eye"></i>
    </button>
    <button
      (click)="onEdit($event)"
      class="btn-action btn-edit"
      title="Modifier"
    >
      <i class="fas fa-pencil-alt"></i>
    </button>
    <button
      (click)="onDelete($event)"
      class="btn-action btn-delete"
      title="Supprimer"
    >
      <i class="fas fa-trash-alt"></i>
    </button>
  </div>

  <!-- Infobulle rapide -->
  <div class="quick-info" *ngIf="person.notes && person.notes.length > 0">
    <div class="info-icon"><i class="fas fa-sticky-note"></i></div>
    <div class="info-text">{{ person.notes | truncate:50 }}</div>
  </div>
</div>
